{
  "context": {
    "task": "Análisis de calidad de datos para generar reglas de Great Expectations",
    "dataset_name": "orders",
    "analysis_date": "2025-09-25T08:54:32.758377"
  },
  "dataset_info": {
    "file_path": "data/orders.csv",
    "shape": [
      20,
      5
    ],
    "total_rows": 20,
    "total_columns": 5,
    "sample_data": [
      {
        "order_id": 1001,
        "status": "PENDING",
        "amount": 49.9,
        "event_time": "2025-09-20T09:15:00+02:00",
        "country_code": "ES"
      },
      {
        "order_id": 1002,
        "status": "SHIPPED",
        "amount": 120.0,
        "event_time": "2025-09-20T10:05:00+02:00",
        "country_code": "FR"
      },
      {
        "order_id": 1003,
        "status": "CANCELED",
        "amount": 0.0,
        "event_time": "2025-09-20T11:22:00+02:00",
        "country_code": "DE"
      }
    ]
  },
  "column_analysis": {
    "order_id": {
      "dtype": "int64",
      "null_count": 0,
      "unique_count": 20,
      "sample_values": [
        "1001",
        "1002",
        "1003",
        "1004",
        "1005"
      ],
      "is_categorical": false
    },
    "status": {
      "dtype": "object",
      "null_count": 0,
      "unique_count": 4,
      "sample_values": [
        "PENDING",
        "SHIPPED",
        "CANCELED",
        "SHIPPED",
        "PENDING"
      ],
      "unique_values": [
        "CANCELED",
        "PENDING",
        "SHIPPED",
        "UNKNOWN"
      ],
      "is_categorical": true,
      "value_frequencies": {
        "SHIPPED": 9,
        "PENDING": 8,
        "CANCELED": 2,
        "UNKNOWN": 1
      }
    },
    "amount": {
      "dtype": "float64",
      "null_count": 1,
      "unique_count": 18,
      "sample_values": [
        "49.9",
        "120.0",
        "0.0",
        "75.5",
        "15.99"
      ],
      "is_categorical": false
    },
    "event_time": {
      "dtype": "object",
      "null_count": 0,
      "unique_count": 20,
      "sample_values": [
        "2025-09-20T09:15:00+02:00",
        "2025-09-20T10:05:00+02:00",
        "2025-09-20T11:22:00+02:00",
        "2025-09-20T12:48:00+02:00",
        "2025-09-20T14:03:00+02:00"
      ],
      "is_categorical": false
    },
    "country_code": {
      "dtype": "object",
      "null_count": 0,
      "unique_count": 7,
      "sample_values": [
        "ES",
        "FR",
        "DE",
        "IT",
        "PT"
      ],
      "unique_values": [
        "CH",
        "DE",
        "ES",
        "FR",
        "IT",
        "NL",
        "PT"
      ],
      "is_categorical": true,
      "value_frequencies": {
        "ES": 6,
        "FR": 3,
        "DE": 3,
        "PT": 3,
        "IT": 2,
        "NL": 2,
        "CH": 1
      }
    }
  },
  "documentation": {
    "content": "# Dataset: `orders`\n\nEste dataset contiene pedidos normalizados para analítica y reporting.\n\n## Esquema esperado (alto nivel)\n- `order_id` (string): identificador único del pedido.\n- `status` (string, UPPER): estado del pedido. Valores esperados: `PENDING`, `SHIPPED`, `CANCELED`.\n- `amount` (number, EUR): importe total del pedido. Normalmente **≥ 0**; rango típico **0–500 EUR** (excepcionalmente < 1000 EUR).\n- `event_time` (timestamp, Europe/Madrid): marca temporal del evento del pedido.\n- `country_code` (string): código de país en **ISO-3166-1 alpha-2** (p. ej., ES, FR, DE, IT, PT, NL, CH). No se limita a una lista cerrada si cumple ISO.\n\n## Reglas de negocio propuestas para el contrato de datos\n1. **Identidad**\n   - `order_id` es **único** por fila (no debe tener duplicados).\n\n2. **Dominios / Enumeraciones**\n   - `status` ∈ {`PENDING`, `SHIPPED`, `CANCELED`} (en mayúsculas).\n   - `country_code` debe cumplir **ISO-3166-1 alpha-2**.\n\n3. **Rangos y formatos**\n   - `amount` ≥ 0. Rango típico **0–500 EUR**; valores fuera de ese rango deben revisarse (excepcionales < 1000).\n   - `event_time` no debe estar en el **futuro**.\n\n4. **Frecuencia y Frescura (SLA)**\n   - Actualización **DIARIA**; el dataset debe estar disponible **antes de 08:00 Europe/Madrid** cada día natural.\n\n5. **Volumen esperado**\n   - Volumen diario habitual: **15–30 filas/día** (en entornos de prueba puede ser menor).\n\n## Notas de calidad y consideraciones\n- El dataset puede incluir pedidos cancelados con `amount = 0`.\n- Los valores de `status` adicionales o desconocidos deben registrarse como discrepancias.\n- El contrato debe incluir **justificación** (“grounding”) de cada regla, con referencia a esta documentación o a evidencias del perfilado/consultas.\n",
    "length": 1748,
    "available": true
  },
  "data_quality_observations": {
    "columns_with_nulls": [
      "amount"
    ],
    "potential_id_columns": [
      "order_id",
      "event_time"
    ],
    "categorical_columns": [
      "status",
      "country_code"
    ],
    "numeric_columns": [
      "order_id",
      "amount"
    ]
  },
  "pydantic_expectations_info": [
    "description: Validates that a specific column exists in the dataset\nproperties:\n  column:\n    description: Name of the column that must exist\n    title: Column\n    type: string\n  expectation_type:\n    const: expect_column_to_exist\n    default: expect_column_to_exist\n    title: Expectation Type\n    type: string\nrequired:\n- column\ntitle: ExpectColumnToExist\ntype: object\n",
    "description: Validates that column values are not null\nproperties:\n  column:\n    description: Name of the column to check for null values\n    title: Column\n    type: string\n  expectation_type:\n    const: expect_column_values_to_not_be_null\n    default: expect_column_values_to_not_be_null\n    title: Expectation Type\n    type: string\n  mostly:\n    anyOf:\n    - maximum: 1.0\n      minimum: 0.0\n      type: number\n    - type: 'null'\n    default: 1.0\n    description: Minimum fraction of non-null values (0.0 to 1.0)\n    title: Mostly\nrequired:\n- column\ntitle: ExpectColumnValuesToNotBeNull\ntype: object\n",
    "description: Validates that all values in a column are unique\nproperties:\n  column:\n    description: Name of the column that should have unique values\n    title: Column\n    type: string\n  expectation_type:\n    const: expect_column_values_to_be_unique\n    default: expect_column_values_to_be_unique\n    title: Expectation Type\n    type: string\n  mostly:\n    anyOf:\n    - maximum: 1.0\n      minimum: 0.0\n      type: number\n    - type: 'null'\n    default: 1.0\n    description: Minimum fraction of unique values\n    title: Mostly\nrequired:\n- column\ntitle: ExpectColumnValuesToBeUnique\ntype: object\n",
    "description: Validates that combinations of multiple columns are unique\nproperties:\n  column_list:\n    description: List of column names that together should form unique combinations\n    items:\n      type: string\n    title: Column List\n    type: array\n  expectation_type:\n    const: expect_compound_columns_to_be_unique\n    default: expect_compound_columns_to_be_unique\n    title: Expectation Type\n    type: string\nrequired:\n- column_list\ntitle: ExpectCompoundColumnsToBeUnique\ntype: object\n",
    "description: Validates that column values are within a predefined set\nproperties:\n  column:\n    description: Name of the column to validate against the value set\n    title: Column\n    type: string\n  expectation_type:\n    const: expect_column_values_to_be_in_set\n    default: expect_column_values_to_be_in_set\n    title: Expectation Type\n    type: string\n  mostly:\n    anyOf:\n    - maximum: 1.0\n      minimum: 0.0\n      type: number\n    - type: 'null'\n    default: 1.0\n    description: Minimum fraction of values that must be in the set\n    title: Mostly\n  value_set:\n    description: List of valid values\n    items:\n      anyOf:\n      - type: string\n      - type: integer\n      - type: number\n    title: Value Set\n    type: array\nrequired:\n- column\n- value_set\ntitle: ExpectColumnValuesToBeInSet\ntype: object\n",
    "description: Validates that column values match a regular expression pattern\nproperties:\n  column:\n    description: Name of the column to validate with regex\n    title: Column\n    type: string\n  expectation_type:\n    const: expect_column_values_to_match_regex\n    default: expect_column_values_to_match_regex\n    title: Expectation Type\n    type: string\n  mostly:\n    anyOf:\n    - maximum: 1.0\n      minimum: 0.0\n      type: number\n    - type: 'null'\n    default: 1.0\n    description: Minimum fraction of values that must match the regex\n    title: Mostly\n  regex:\n    description: Regular expression pattern\n    title: Regex\n    type: string\nrequired:\n- column\n- regex\ntitle: ExpectColumnValuesToMatchRegex\ntype: object\n",
    "description: Validates that numeric column values fall within a specified range\nproperties:\n  column:\n    description: Name of the numeric column to validate\n    title: Column\n    type: string\n  expectation_type:\n    const: expect_column_values_to_be_between\n    default: expect_column_values_to_be_between\n    title: Expectation Type\n    type: string\n  max_value:\n    anyOf:\n    - type: integer\n    - type: number\n    - type: 'null'\n    default: null\n    description: Maximum allowed value (inclusive)\n    title: Max Value\n  min_value:\n    anyOf:\n    - type: integer\n    - type: number\n    - type: 'null'\n    default: null\n    description: Minimum allowed value (inclusive)\n    title: Min Value\n  mostly:\n    anyOf:\n    - maximum: 1.0\n      minimum: 0.0\n      type: number\n    - type: 'null'\n    default: 1.0\n    description: Minimum fraction of values that must be within range\n    title: Mostly\nrequired:\n- column\ntitle: ExpectColumnValuesToBeBetween\ntype: object\n",
    "description: Validates that column values are of the expected data type\nproperties:\n  column:\n    description: Name of the column to validate type\n    title: Column\n    type: string\n  expectation_type:\n    const: expect_column_values_to_be_of_type\n    default: expect_column_values_to_be_of_type\n    title: Expectation Type\n    type: string\n  type_:\n    description: 'Expected data type. Examples: ''int'', ''float'', ''str'', ''bool'',\n      ''datetime'''\n    title: Type\n    type: string\nrequired:\n- column\n- type_\ntitle: ExpectColumnValuesToBeOfType\ntype: object\n",
    "description: Validates that string values match a datetime format\nproperties:\n  column:\n    description: Name of the column containing datetime strings\n    title: Column\n    type: string\n  expectation_type:\n    const: expect_column_values_to_match_strftime_format\n    default: expect_column_values_to_match_strftime_format\n    title: Expectation Type\n    type: string\n  mostly:\n    anyOf:\n    - maximum: 1.0\n      minimum: 0.0\n      type: number\n    - type: 'null'\n    default: 1.0\n    description: Minimum fraction of values that must match the format\n    title: Mostly\n  strftime_format:\n    description: Expected datetime format string\n    title: Strftime Format\n    type: string\nrequired:\n- column\n- strftime_format\ntitle: ExpectColumnValuesToMatchStrftimeFormat\ntype: object\n",
    "description: Validates that the mean of a numeric column falls within expected bounds\nproperties:\n  column:\n    description: Name of the numeric column to calculate mean\n    title: Column\n    type: string\n  expectation_type:\n    const: expect_column_mean_to_be_between\n    default: expect_column_mean_to_be_between\n    title: Expectation Type\n    type: string\n  max_value:\n    anyOf:\n    - type: integer\n    - type: number\n    - type: 'null'\n    default: null\n    description: Maximum expected mean value\n    title: Max Value\n  min_value:\n    anyOf:\n    - type: integer\n    - type: number\n    - type: 'null'\n    default: null\n    description: Minimum expected mean value\n    title: Min Value\nrequired:\n- column\ntitle: ExpectColumnMeanToBeBetween\ntype: object\n",
    "description: Validates that the total number of rows falls within expected bounds\nproperties:\n  expectation_type:\n    const: expect_table_row_count_to_be_between\n    default: expect_table_row_count_to_be_between\n    title: Expectation Type\n    type: string\n  max_value:\n    anyOf:\n    - type: integer\n    - type: 'null'\n    default: null\n    description: Maximum expected number of rows\n    title: Max Value\n  min_value:\n    anyOf:\n    - type: integer\n    - type: 'null'\n    default: null\n    description: Minimum expected number of rows\n    title: Min Value\ntitle: ExpectTableRowCountToBeBetween\ntype: object\n",
    "description: Validates that the minimum value in a column falls within expected bounds\nproperties:\n  column:\n    description: Name of the numeric column\n    title: Column\n    type: string\n  expectation_type:\n    const: expect_column_min_to_be_between\n    default: expect_column_min_to_be_between\n    title: Expectation Type\n    type: string\n  max_value:\n    anyOf:\n    - type: integer\n    - type: number\n    - type: 'null'\n    default: null\n    description: Maximum expected minimum value\n    title: Max Value\n  min_value:\n    anyOf:\n    - type: integer\n    - type: number\n    - type: 'null'\n    default: null\n    description: Minimum expected minimum value\n    title: Min Value\nrequired:\n- column\ntitle: ExpectColumnMinToBeBetween\ntype: object\n",
    "description: Validates that the maximum value in a column falls within expected bounds\nproperties:\n  column:\n    description: Name of the numeric column\n    title: Column\n    type: string\n  expectation_type:\n    const: expect_column_max_to_be_between\n    default: expect_column_max_to_be_between\n    title: Expectation Type\n    type: string\n  max_value:\n    anyOf:\n    - type: integer\n    - type: number\n    - type: 'null'\n    default: null\n    description: Maximum expected maximum value\n    title: Max Value\n  min_value:\n    anyOf:\n    - type: integer\n    - type: number\n    - type: 'null'\n    default: null\n    description: Minimum expected maximum value\n    title: Min Value\nrequired:\n- column\ntitle: ExpectColumnMaxToBeBetween\ntype: object\n",
    "description: Validates that the sum of values in a column falls within expected bounds\nproperties:\n  column:\n    description: Name of the numeric column to sum\n    title: Column\n    type: string\n  expectation_type:\n    const: expect_column_sum_to_be_between\n    default: expect_column_sum_to_be_between\n    title: Expectation Type\n    type: string\n  max_value:\n    anyOf:\n    - type: integer\n    - type: number\n    - type: 'null'\n    default: null\n    description: Maximum expected sum\n    title: Max Value\n  min_value:\n    anyOf:\n    - type: integer\n    - type: number\n    - type: 'null'\n    default: null\n    description: Minimum expected sum\n    title: Min Value\nrequired:\n- column\ntitle: ExpectColumnSumToBeBetween\ntype: object\n"
  ]
}